<%- include("../layouts/user/header.ejs") -%>
  <nav class="custom-navbar navbar navbar navbar-expand-md navbar-dark " arial-label="Furni navigation bar">

    <div class="container">
      <a class="navbar-brand" href="/">KEF<span>.</span></a>

      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarsFurni"
        aria-controls="navbarsFurni" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarsFurni">
        <ul class="custom-navbar-nav navbar-nav ms-auto mb-2 mb-md-0">
          <li class="nav-item ">
            <a class="nav-link" href="/">Home</a>
          </li>
          <li><a class="nav-link" href="">Whislist</a></li>
          <li><a class="nav-link" href="">My Orders</a></li>
        </ul>

        <ul class="custom-navbar-cta navbar-nav mb-2 mb-md-0 ms-5">

          <%if(locals.user){ %>
            <div class="dropdown show">
              <a class="btn  dropdown-toggle" href="#" role="button" id="dropdownMenuLink" data-toggle="dropdown"
                aria-haspopup="true" aria-expanded="false">
                <img src="/static/images/user.svg">
              </a>

              <div class="dropdown-menu" aria-labelledby="dropdownMenuLink">
                <a class="dropdown-item text-light" href="/logout">Logout</a>
                <a class="dropdown-item text-light" href="/profile">Profile</a>
                <!-- <a class="dropdown-item" href="#"></a> -->
              </div>
            </div>
            <%} else{%>
              <li><a class="nav-link" href="/login"><img src="/static/images/user.svg"></a></li>
              <%}%>
                <li><a class="nav-link" href="/cart"><img src="/static/images/cart.svg"></a></li>
        </ul>
      </div>
    </div>

  </nav>


  <style>
    .custom-border {
      border: 3px solid;
    }

    .cart-icon-container {
      position: relative;
      display: inline-block;
    }

    .cart-badge {
      position: absolute;
      top: -10px;
      right: -10px;
      min-width: 5px;
      padding: 1px;
      border-radius: 50%;
      background-color: #007bff;
      /* You can change the background color */
      color: white;
      text-align: center;
      font-size: 12px;
    }

    .r-badge {
      position: absolute;
      top: -10px;
      right: -10px;
      min-width: 5px;
      padding: 1px;
      border-radius: 50%;
      background-color: #007bff;
      /* You can change the background color */
      color: white;
      text-align: center;
      font-size: 12px;
    }
  </style>

  <body>
    <!-- End Header/Navigation -->

    <!-- Start Hero Section -->
    <div class="hero">
      <div class="container">
        <div class="row justify-content-between">
          <div class="col-lg-5">
            <div class="intro-excerpt">
              <h1>User profile</h1>
            </div>
          </div>
          <div class="col-lg-7">

          </div>
        </div>
      </div>
    </div>
    <!-- End Hero Section -->
    <section style="background-color: #eee;">
      <div class="container py-5">

        <div class="container ">
          <div class="row">
            <div class="  col-lg-12 ">
              <div class="card mb-4 col-lg-4 m-auto">
                <!-- <div class="card-body text-center">

        <img src="{{obj.profile.url}}" alt="avatar"class="mt-4 img-fluid" style="width: 150px; height:200px;">

        <img src="https://mdbcdn.b-cdn.net/img/Photos/new-templates/bootstrap-chat/ava3.webp" alt="avatar"
          class=" img-fluid" style="width: 150px;">

        <h5 class="my-3"></h5>
       
        <div class="d-flex justify-content-center mb-2">

        </div>
      </div> -->
              </div>
            </div>
          </div>
          <div class="col-lg-12">
            <div class="card mb-4">
              <div class="card-body">
                <div class="row">
                  <div class="col-sm-3">
                    <p class="mb-0">Full Name</p>
                  </div>
                  <div class="col-sm-9">
                    <p class="text-muted mb-0">
                      <%= user.name %>
                    </p>
                  </div>
                </div>
                <hr>
                <div class="row">
                  <div class="col-sm-3">
                    <p class="mb-0">Email</p>
                  </div>
                  <div class="col-sm-9">
                    <p class="text-muted mb-0">
                      <%= user.email%>
                    </p>
                  </div>
                </div>
                <hr>
                <div class="row">
                  <div class="col-sm-3">
                    <p class="mb-0">Phone</p>
                  </div>
                  <div class="col-sm-9">
                    <p class="text-muted mb-0">
                      <%= user.mobile %>
                    </p>
                  </div>
                </div>
                <hr>
                <!-- <div class="row">
          <div class="col-sm-3">
            <p class="mb-0">your wallet amount</p>
          </div>
          <div class="col-sm-9">
            <p class="text-muted mb-0">â‚¹{{wal.amount}}</p>
          </div>
        </div> -->
                <!-- <hr>
        <div class="row">
          <div class="col-sm-3">
            <p class="mb-0">my rferrel code</p>
          </div>
          <div class="col-sm-9">
            <p class="text-muted mb-0">http://127.0.0.1:8000/usersignup/?ref={{obj.referral_link}}</p>
          </div>
        </div>
        <hr> -->


                <a href="/editprofile?id=<%= user._id %>"><button type="button" class="btn btn-primary mt-4">edit profile</button></a>
                <a class="btn btn-primary mt-4 " href="">change password</a>
              </div>
            </div>
            <table class="table  table-bordered .custom-border table-striped table-hover">
              <thead>
                <tr class="bg-black text-white">

                  <th>Name</th>
                  <th>state,country</th>
                  <th>pin</th>
                  <th>phone</th>
                  <th>actions</th>
                </tr>
              </thead>
              <tbody>
                <% if(user.addresses.length>0){ %>
                  <% user.addresses.forEach((value)=>{ %>
                    <tr>
                      <td>
                        <%= value.name%>
                      </td>
                      <td>
                        <%= value.state%>,<%= value.country%>
                      </td>
                      <td>
                        <%= value.pinNo%>
                      </td>
                      <td>
                        <%= value.phNo %>
                      </td>
                      <td>
                        <a href="/editaddressinuser/{{i.id}}" class="d-block text-dark text-decoration-none">Edit</a>
                        <a href="#removeaddress{{i.id}}" class=" text-danger text-decoration-none"
                          data-toggle="modal">Remove</a>

                        <div id="removeaddress{{i.id}}" class="modal fade">

                          <div class="modal-dialog">
                            <div class="modal-content">
                              <form action="/removeaddress/{{i.id}}" method='POST'>
                                {% csrf_token%}
                                <div class="modal-header">
                                  <h4 class="modal-title">remove the address</h4>
                                  <button type="button" class="close" data-dismiss="modal"
                                    aria-hidden="true">&times;</button>
                                </div>
                                <div class="modal-body">
                                  <p>do you want to remove the address?</p>
                                </div>
                                <div class="modal-footer">
                                  <input type="button" class="btn btn-default" data-dismiss="modal" value="Cancel">
                                  <button type="submit" class="btn btn-danger" value="Delete">remove</button>
                                </div>
                              </form>
                            </div>
                          </div>

                        </div>

                      </td>
                    </tr>

                    <% }) %>
                      <%}%>
              </tbody>
            </table>
            <a href="#" class="add" data-toggle="modal" data-target="#myModal">
              <button class="btn btn-success"><span>Add address</span></button>
            </a>
          </div>
        </div>

        <!--Start Modal--->
        <div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
          aria-hidden="true">
          <div class="modal-dialog" role="document">
            <div class="modal-content">
              <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">Add Address</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                  <span aria-hidden="true">&times;</span>
                </button>
              </div>
              <div class="modal-body">
                <!-- Form fields -->
                <form action="/addAddress?email=<%=user.email%>" method="post">
                  <div class="form-group">
                    <label for="name">Name:</label>
                    <input type="text" class="form-control" id="name" name="name" required
                      placeholder="Enter your name">
                  </div>
                  <div class="form-group">
                    <label for="name">Country:</label>
                    <input type="text" class="form-control" id="Country" name="country" required
                      placeholder="Enter your Country">
                  </div>
                  <div class="form-group">
                    <label for="state">state:</label>
                    <select class="form-control" id="state" name="state">
                      <!-- Add the options for each country here -->
                      <option value="Kerala">Kerala</option>
                      <option value="TamilNadu">Tamil Nadu</option>
                      <option value="Bengaluru">Bengaluru</option>
                      <option value="Goa">Goa</option>
                      <!-- Add more countries as needed -->
                    </select>
                  </div>

                  <div class="form-group">
                    <label for="pin">Pin No:</label>
                    <input type="number" class="form-control" name="pin" id="pin" required
                      placeholder="Enter your pin number">
                  </div>
                  <div class="form-group">
                    <label for="phone">Phone No:</label>
                    <input type="number" class="form-control" name="phone" id="phone" required
                      placeholder="Enter your phone number">
                  </div>
                  <div class="text-center"> <button type="submit" class="btn btn-primary">Submit</button></div>
                </form>
              </div>
            </div>
          </div>
        </div>
        <!--End MOdal--->


      </div>
      </div>
    </section>






    <!-- Start Footer Section -->
    <footer class="footer-section">
      <div class="container relative">
        <div class="row g-5 mb-5">
          <div class="col-lg-4">
            <div class="mb-4 footer-logo-wrap"><a href="#" class="footer-logo">Furni<span>.</span></a></div>
            <p class="mb-4">Donec facilisis quam ut purus rutrum lobortis. Donec vitae odio quis nisl dapibus malesuada.
              Nullam ac aliquet velit. Aliquam vulputate velit imperdiet dolor tempor tristique. Pellentesque habitant
            </p>

            <ul class="list-unstyled custom-social">
              <li><a href="#"><span class="fa fa-brands fa-facebook-f"></span></a></li>
              <li><a href="#"><span class="fa fa-brands fa-twitter"></span></a></li>
              <li><a href="#"><span class="fa fa-brands fa-instagram"></span></a></li>
              <li><a href="#"><span class="fa fa-brands fa-linkedin"></span></a></li>
            </ul>
          </div>

          <div class="col-lg-8">
            <div class="row links-wrap">
              <div class="col-6 col-sm-6 col-md-3">
                <ul class="list-unstyled">
                  <li><a href="#">About us</a></li>
                  <li><a href="#">Services</a></li>
                  <li><a href="#">Blog</a></li>
                  <li><a href="#">Contact us</a></li>
                </ul>
              </div>

              <div class="col-6 col-sm-6 col-md-3">
                <ul class="list-unstyled">
                  <li><a href="#">Support</a></li>
                  <li><a href="#">Knowledge base</a></li>
                  <li><a href="#">Live chat</a></li>
                </ul>
              </div>

              <div class="col-6 col-sm-6 col-md-3">
                <ul class="list-unstyled">
                  <li><a href="#">Jobs</a></li>
                  <li><a href="#">Our team</a></li>
                  <li><a href="#">Leadership</a></li>
                  <li><a href="#">Privacy Policy</a></li>
                </ul>
              </div>

              <div class="col-6 col-sm-6 col-md-3">
                <ul class="list-unstyled">
                  <li><a href="#">Nordic Chair</a></li>
                  <li><a href="#">Kruzo Aero</a></li>
                  <li><a href="#">Ergonomic Chair</a></li>
                </ul>
              </div>
            </div>
          </div>

        </div>

        <div class="border-top copyright">
          <div class="row pt-4">
            <div class="col-lg-6">
              <p class="mb-2 text-center text-lg-start">Copyright &copy;
                <script>document.write(new Date().getFullYear());</script>. All Rights Reserved. &mdash; Designed with
                love by <a href="https://untree.co">Untree.co</a> Distributed By <a
                  hreff="https://themewagon.com">ThemeWagon</a> <!-- License information: https://untree.co/license/ -->
              </p>
            </div>

            <div class="col-lg-6 text-center text-lg-end">
              <ul class="list-unstyled d-inline-flex ms-auto">
                <li class="me-4"><a href="#">Terms &amp; Conditions</a></li>
                <li><a href="#">Privacy Policy</a></li>
              </ul>
            </div>

          </div>
        </div>

      </div>
    </footer>


    <%- include('../layouts/user/footer.ejs') -%>